#! /bin/sh

LIST=$(miyka list)

if test -n "$LIST"
then NAMES=$(printf "%s\n%s\n%s" "$LIST" "*new*" "*copy*")
else NAMES="*new*
*pwd*"
fi

NAME=$(printf "%s" "$NAMES" | fzf --prompt "run> ")

if test -z "$NAME"
then echo Cancelled ; exit 1
fi

case "$NAME" in
	"*new*")
		exec my-session-create --new "$@"
		;;
	"*edit*")
		NAME=$(printf "%s" "$NAMES" | fzf --prompt "edit> ")
		miyka edit "$NAME"
		;;
	"*copy*")
		exec my-session-create --copy "$@"
		;;
	*)
		exec my-session-run "$NAME" "$@"
		;;
esac
